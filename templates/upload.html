{% extends 'base.html' %}

{% block title %}データのアップロード{% endblock %}

{% block content %}
<div class="container mt-4">
    <h1>実験データ管理システム</h1>

    {# フラッシュメッセージの表示 #}
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="alert alert-{{ category }}">{{ message }}</div>
            {% endfor %}
        {% endif %}
    {% endwith %}

    <h2>データのアップロード</h2>

    <form action="{{ url_for('upload_file') }}" method="post" enctype="multipart/form-data" class="needs-validation" novalidate>
        <h3>メタデータ入力</h3>
        <div class="mb-3">
            <label for="experiment_device" class="form-label">実験装置名:</label>
            <input type="text" class="form-control" id="experiment_device" name="experiment_device" required>
            <div class="invalid-feedback">
                実験装置名を入力してください。
            </div>
        </div>

        <div class="mb-3">
            <label for="sample_name" class="form-label">サンプル名:</label>
            <input type="text" class="form-control" id="sample_name" name="sample_name" required>
            <div class="invalid-feedback">
                サンプル名を入力してください。
            </div>
        </div>

        <div class="mb-3">
            <label for="experiment_date" class="form-label">日付:</label>
            <input type="date" class="form-control" id="experiment_date" name="experiment_date" required>
            <div class="invalid-feedback">
                日付を入力してください。
            </div>
        </div>

        <h3>実験データファイル (.xlsx, .csv)</h3>
        <div class="mb-3">
            <label for="file" class="form-label">データファイルを選択してください:</label>
            <input type="file" class="form-control" id="file" name="file" accept=".xlsx,.csv" required>
            <div class="invalid-feedback">
                データファイルを選択してください。
            </div>
        </div>

        <button type="submit" class="btn btn-primary">データ登録</button>
    </form>
</div>
{% endblock %}